layer: library
tags:
  - javascript
  - deno
  - npm
  - javascript
  - deno
  - npm
tasks:
  test:
    command: deno install --config=deno.json --lock=deno.lock --frozen
    env:
      CWD: third_party/javascript
    inputs:
      - file: deno.json
      - file: deno.lock
    options:
      cache: true
  update-lockfile:
    command: deno install --config=deno.json --lock=deno.lock --frozen=false
    env:
      CWD: third_party/javascript
    local: true
  package_test:
    command: npm install && git diff --exit-code package-lock.json
    env:
      CWD: "."
    inputs:
      - glob: /**/package.json
        cache: true
      - glob: /**/package-lock.json
        cache: true
    options:
      cache: true
