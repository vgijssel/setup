language: javascript
layer: application
tags:
  - type.application
  - scope.documentation
  - type.application
  - scope.documentation
tasks:
  check:
    command: |
      djpeg -version
      cjpeg -version
      jpegtran -version
  build:
    command: |
      djpeg -version && cjpeg -version && jpegtran -version
      mkdocs build
    env:
      CWD: .
    inputs:
      - glob: "**/*.md"
        cache: true
      - glob: "**/*.yml"
        cache: true
      - glob: "**/*.yaml"
        cache: true
      - file: /mkdocs.yml
      - glob: /docs/**/*
        cache: true
    outputs:
      - /site
    options:
      cache: true
      runInCI: false
  serve:
    command: |
      djpeg -version && cjpeg -version && jpegtran -version
      mkdocs serve -a localhost:8000
    env:
      CWD: .
    local: true
  publish:
    command: |
      djpeg -version && cjpeg -version && jpegtran -version
      mkdocs gh-deploy --clean
    env:
      CWD: .
    local: true
