- id: '1754753646691'
  alias: Supply Closet - Turn On Lights
  description: ''
  triggers:
  - type: opened
    device_id: a62de5fe0e35a2d1e908876d86033594
    entity_id: 297272a4570654e5bd288da03d3b9437
    domain: binary_sensor
    trigger: device
  conditions: []
  actions:
  - type: turn_on
    device_id: 302cf0e6ebd333f1e79e8c33d4d4c030
    entity_id: 669044aeb04953856eb2c5fbc68cddbd
    domain: switch
  mode: single
- id: '1754753697773'
  alias: Supply Closet - Turn Off Lights
  description: ''
  triggers:
  - type: not_opened
    device_id: a62de5fe0e35a2d1e908876d86033594
    entity_id: 297272a4570654e5bd288da03d3b9437
    domain: binary_sensor
    trigger: device
  conditions: []
  actions:
  - type: turn_off
    device_id: 302cf0e6ebd333f1e79e8c33d4d4c030
    entity_id: 669044aeb04953856eb2c5fbc68cddbd
    domain: switch
  mode: single
- id: '1754897315049'
  alias: Garden - Start Pump Timer
  description: ''
  triggers:
  - trigger: time
    at: 06:00:00
    weekday:
    - mon
    - tue
    - wed
    - fri
    - sat
    - sun
    - thu
  - trigger: time
    at: '22:00:00'
    weekday:
    - mon
    - tue
    - wed
    - thu
    - fri
    - sat
    - sun
  conditions:
  - condition: device
    type: is_off
    device_id: 254bd3f4675ebd884cf48e8432ade589
    entity_id: c3c6a841bbf202032bd5ed1a881a54ff
    domain: switch
  actions:
  - action: timer.start
    metadata: {}
    data:
      duration: 01:00:00
    target:
      entity_id: timer.garden_pump_timer
  mode: single
- id: '1754897526643'
  alias: Garden - Start Pump
  description: ''
  triggers:
  - trigger: state
    entity_id:
    - timer.garden_pump_timer
    from:
    to: active
  conditions: []
  actions:
  - type: turn_on
    device_id: 254bd3f4675ebd884cf48e8432ade589
    entity_id: c3c6a841bbf202032bd5ed1a881a54ff
    domain: switch
  mode: single
- id: '1754897648095'
  alias: Garden - Turn Off Pump
  description: ''
  triggers:
  - trigger: state
    entity_id:
    - timer.garden_pump_timer
    to: idle
  conditions: []
  actions:
  - repeat:
      sequence:
      - type: turn_off
        device_id: 254bd3f4675ebd884cf48e8432ade589
        entity_id: c3c6a841bbf202032bd5ed1a881a54ff
        domain: switch
      - delay:
          hours: 0
          minutes: 5
          seconds: 0
          milliseconds: 0
      until:
      - condition: device
        type: is_off
        device_id: 254bd3f4675ebd884cf48e8432ade589
        entity_id: c3c6a841bbf202032bd5ed1a881a54ff
        domain: switch
  mode: single
- id: '1754921354906'
  alias: Garden - Door Presence
  description: ''
  use_blueprint:
    path: setup/door_presence.yaml
    input:
      contact_sensor: binary_sensor.garden_contact_door
      motion_sensor: binary_sensor.garden_motion_occupancy
      variable_sensor: binary_sensor.garden_door_presence
- id: '1754923333948'
  alias: Hallway - Door Presence
  description: ''
  use_blueprint:
    path: setup/door_presence.yaml
    input:
      contact_sensor: binary_sensor.hallway_contact_door
      motion_sensor: binary_sensor.hallway_motion_occupancy
      variable_sensor: binary_sensor.hallway_door_presence
- id: '1754923400673'
  alias: Living Room - Door Presence
  description: ''
  use_blueprint:
    path: setup/door_presence.yaml
    input:
      contact_sensor: binary_sensor.living_room_contact_door
      motion_sensor: binary_sensor.living_room_motion_occupancy
      variable_sensor: binary_sensor.living_room_door_presence
- id: '1754923474097'
  alias: Toilet - Door Presence
  description: ''
  use_blueprint:
    path: setup/door_presence.yaml
    input:
      contact_sensor: binary_sensor.toilet_contact_door
      motion_sensor: binary_sensor.toilet_motion
      variable_sensor: binary_sensor.toilet_door_presence
- id: '1754924013174'
  alias: Baby Room - Door Presence
  description: ''
  use_blueprint:
    path: setup/door_presence.yaml
    input:
      contact_sensor: binary_sensor.baby_room_contact_door
      motion_sensor: binary_sensor.baby_room_motion_occupancy
      variable_sensor: binary_sensor.baby_room_door_presence
- id: '1754924065570'
  alias: Bedroom - Door Presence
  description: ''
  use_blueprint:
    path: setup/door_presence.yaml
    input:
      contact_sensor: binary_sensor.bedroom_contact_door
      motion_sensor: binary_sensor.bedroom_motion_occupancy
      variable_sensor: binary_sensor.bedroom_door_presence
- id: '1754924108862'
  alias: Office - Door Presence
  description: ''
  use_blueprint:
    path: setup/door_presence.yaml
    input:
      contact_sensor: binary_sensor.office_door_door
      motion_sensor: binary_sensor.office_motion_occupancy
      variable_sensor: binary_sensor.office_door_presence
- id: '1755173983930'
  alias: Living Room - Room Occupancy
  description: ''
  use_blueprint:
    path: setup/room_occupancy.yaml
    input:
      door_sensors:
      - binary_sensor.living_room_door_presence
      - binary_sensor.garden_door_presence
      occupancy_sensors:
      - binary_sensor.living_room_occupancy_presence
      - binary_sensor.living_room_tv_occupancy
      occupancy_state_selector: input_select.living_room_room_occupancy_select
      occupancy_timer: timer.living_room_room_occupancy_timer
      entering_timer_duration:
        hours: 0
        minutes: 2
        seconds: 0
      entering_confirm_timer_duration:
        hours: 0
        minutes: 0
        seconds: 10
      leaving_timer_duration:
        hours: 0
        minutes: 2
        seconds: 0
      leaving_confirm_timer_duration:
        hours: 0
        minutes: 10
        seconds: 0
      occupancy_toggle: input_boolean.living_room_room_occupancy_toggle
      presence_timer_duration:
        hours: 4
        minutes: 0
        seconds: 0
- id: '1755176063280'
  alias: Hallway - Room Occupancy
  description: ''
  use_blueprint:
    path: setup/room_occupancy.yaml
    input:
      door_sensors:
      - binary_sensor.living_room_door_presence
      - binary_sensor.hallway_door_presence
      - binary_sensor.landing_motion_occupancy
      occupancy_sensors:
      - binary_sensor.hallway_occupancy_presence
      - binary_sensor.toilet_motion
      occupancy_state_selector: input_select.hallway_room_occupancy_select
      occupancy_timer: timer.hallway_room_occupancy_timer
      occupancy_toggle: input_boolean.hallway_room_occupancy_toggle
      entering_timer_duration:
        hours: 0
        minutes: 2
        seconds: 0
      entering_confirm_timer_duration:
        hours: 0
        minutes: 0
        seconds: 3
      leaving_timer_duration:
        hours: 0
        minutes: 2
        seconds: 0
      leaving_confirm_timer_duration:
        hours: 0
        minutes: 3
        seconds: 0
      presence_timer_duration:
        hours: 1
        minutes: 0
        seconds: 0
- id: '1755177390289'
  alias: Living Room - Occupancy Lights
  description: ''
  use_blueprint:
    path: setup/occupancy_lights.yaml
    input:
      occupancy_toggle: input_boolean.living_room_room_occupancy_toggle
      lights:
      - light.living_room_lights
      - light.kitchen_lights
- id: '1755177432443'
  alias: Hallway - Occupancy Lights
  description: ''
  use_blueprint:
    path: setup/occupancy_lights.yaml
    input:
      occupancy_toggle: input_boolean.hallway_room_occupancy_toggle
      lights:
      - light.hallway_lights
      fade_delay: 60
- id: '1755192029849'
  alias: Bathroom - Room Occupancy
  description: ''
  use_blueprint:
    path: setup/room_occupancy.yaml
    input:
      door_sensors:
      - binary_sensor.bathroom_door_presence
      occupancy_sensors:
      - binary_sensor.bathroom_occupancy_presence
      occupancy_state_selector: input_select.bathroom_room_occupancy_select
      occupancy_timer: timer.bathroom_room_occupancy_timer
      occupancy_toggle: input_boolean.bathroom_room_occupancy_toggle
      leaving_timer_duration:
        hours: 0
        minutes: 5
        seconds: 0
      entering_confirm_timer_duration:
        hours: 0
        minutes: 0
        seconds: 10
      entering_timer_duration:
        hours: 0
        minutes: 1
        seconds: 0
      presence_timer_duration:
        hours: 1
        minutes: 0
        seconds: 0
- id: '1755192139953'
  alias: Bathroom - Occupancy Lights
  description: ''
  use_blueprint:
    path: setup/occupancy_lights.yaml
    input:
      occupancy_toggle: input_boolean.bathroom_room_occupancy_toggle
      lights:
      - light.bathroom_lights
- id: '1755193095431'
  alias: Bathroom - Door Presence
  description: ''
  use_blueprint:
    path: setup/door_presence.yaml
    input:
      contact_sensor: binary_sensor.bathroom_contact_door
      motion_sensor: binary_sensor.bathroom_motion_occupancy
      variable_sensor: binary_sensor.bathroom_door_presence
- id: '1755248144103'
  alias: Bedroom - Room Occupancy
  description: ''
  use_blueprint:
    path: setup/room_occupancy.yaml
    input:
      door_sensors:
      - binary_sensor.bedroom_door_presence
      occupancy_sensors:
      - binary_sensor.bedroom_occupancy_presence
      - binary_sensor.bedroom_tv_occupancy
      occupancy_state_selector: input_select.bedroom_room_occupancy_select
      occupancy_timer: timer.bedroom_room_occupancy_timer
      occupancy_toggle: input_boolean.bedroom_room_occupancy_toggle
      entering_timer_duration:
        hours: 0
        minutes: 1
        seconds: 0
      entering_confirm_timer_duration:
        hours: 0
        minutes: 0
        seconds: 10
      leaving_timer_duration:
        hours: 0
        minutes: 2
        seconds: 0
- id: '1755248312882'
  alias: Office - Room Occupancy
  description: ''
  use_blueprint:
    path: setup/room_occupancy.yaml
    input:
      door_sensors:
      - binary_sensor.office_door_presence
      occupancy_sensors:
      - binary_sensor.office_occupancy_presence
      occupancy_state_selector: input_select.office_room_occupancy_select
      occupancy_timer: timer.office_room_occupancy_timer
      occupancy_toggle: input_boolean.office_room_occupancy_toggle
      entering_timer_duration:
        hours: 0
        minutes: 1
        seconds: 0
      entering_confirm_timer_duration:
        hours: 0
        minutes: 0
        seconds: 10
      leaving_timer_duration:
        hours: 0
        minutes: 2
        seconds: 0
- id: '1755248375721'
  alias: Office - Occupancy Lights
  description: ''
  use_blueprint:
    path: setup/occupancy_lights.yaml
    input:
      occupancy_toggle: input_boolean.office_room_occupancy_toggle
      lights:
      - light.office_light
- id: '1755250048428'
  alias: Bedroom - Occupancy Lights
  description: ''
  use_blueprint:
    path: setup/occupancy_lights.yaml
    input:
      occupancy_toggle: input_boolean.bedroom_room_occupancy_toggle
      lights:
      - light.bedroom_light
      fade_delay: 120
      switches: []
- id: '1755250284225'
  alias: Baby Room - Room Occupancy
  description: ''
  use_blueprint:
    path: setup/room_occupancy.yaml
    input:
      door_sensors:
      - binary_sensor.baby_room_door_presence
      occupancy_sensors:
      - binary_sensor.baby_room_occupancy_presence
      occupancy_state_selector: input_select.baby_room_room_occupancy_select
      occupancy_timer: timer.baby_room_room_occupancy_timer
      occupancy_toggle: input_boolean.baby_room_room_occupancy_toggle
      entering_confirm_timer_duration:
        hours: 0
        minutes: 0
        seconds: 10
      entering_timer_duration:
        hours: 0
        minutes: 1
        seconds: 0
      leaving_timer_duration:
        hours: 0
        minutes: 2
        seconds: 0
- id: '1755250382670'
  alias: Baby Room - Occupancy Lights
  description: ''
  use_blueprint:
    path: setup/occupancy_lights.yaml
    input:
      occupancy_toggle: input_boolean.baby_room_room_occupancy_toggle
      lights:
      - light.baby_room_light
      switches:
      - switch.baby_room_moon_light_moko
      - switch.office_server_moko
- id: '1755251175899'
  alias: Landing - Room Occupancy
  description: ''
  use_blueprint:
    path: setup/room_occupancy.yaml
    input:
      door_sensors:
      - binary_sensor.landing_motion_occupancy
      - binary_sensor.baby_room_door_presence
      - binary_sensor.bedroom_door_presence
      - binary_sensor.office_door_presence
      - binary_sensor.bathroom_door_presence
      occupancy_sensors:
      - binary_sensor.landing_occupancy_presence
      - binary_sensor.laundry_room_motion_occupancy
      occupancy_state_selector: input_select.landing_room_occupancy_select
      occupancy_timer: timer.landing_room_occupancy_timer
      occupancy_toggle: input_boolean.landing_room_occupancy_toggle
      entering_timer_duration:
        hours: 0
        minutes: 2
        seconds: 0
      entering_confirm_timer_duration:
        hours: 0
        minutes: 0
        seconds: 3
      leaving_confirm_timer_duration:
        hours: 0
        minutes: 5
        seconds: 0
      leaving_timer_duration:
        hours: 0
        minutes: 2
        seconds: 0
      presence_timer_duration:
        hours: 1
        minutes: 0
        seconds: 0
- id: '1755251260933'
  alias: Landing - Occupancy Lights
  description: ''
  use_blueprint:
    path: setup/occupancy_lights.yaml
    input:
      occupancy_toggle: input_boolean.landing_room_occupancy_toggle
      lights:
      - light.landing_lights
- id: '1755411089438'
  alias: Toilet - Zone Occupancy
  description: ''
  use_blueprint:
    path: setup/zone_occupancy.yaml
    input:
      door_presence_sensors:
      - binary_sensor.toilet_door_presence
      zone_occupancy_state_selector: input_select.toilet_room_occupancy_select
      room_occupancy_state_selector: input_select.hallway_room_occupancy_select
      occupancy_timer: timer.toilet_room_occupancy_timer
      occupancy_toggle: input_boolean.toilet_room_occupancy_toggle
- id: '1755417307449'
  alias: Toilet - Occupancy Lights
  description: ''
  use_blueprint:
    path: setup/occupancy_lights.yaml
    input:
      occupancy_toggle: input_boolean.toilet_room_occupancy_toggle
      lights:
      - light.toilet_lights
- id: '1755417570297'
  alias: Laundry Room - Room Occupancy
  description: ''
  use_blueprint:
    path: setup/zone_occupancy.yaml
    input:
      door_presence_sensors:
      - binary_sensor.laundry_room_motion_occupancy
      zone_occupancy_state_selector: input_select.laundry_room_room_occupancy_select
      room_occupancy_state_selector: input_select.landing_room_occupancy_select
      occupancy_timer: timer.laundry_room_room_occupancy_timer
      occupancy_toggle: input_boolean.laundry_room_room_occupancy_toggle
- id: '1755419005688'
  alias: Laundry Room - Occupancy Lights
  description: ''
  use_blueprint:
    path: setup/occupancy_lights.yaml
    input:
      occupancy_toggle: input_boolean.laundry_room_room_occupancy_toggle
      switches:
      - switch.laundry_room_shelly
- id: '1755624179768'
  alias: Garden - Heat Swimming Pool
  description: ''
  triggers:
  - trigger: state
    entity_id:
    - switch.garden_pump_plug
  - trigger: state
    entity_id:
    - climate.garden_heat_pump
    attribute: current_temperature
  - trigger: state
    entity_id:
    - input_boolean.garden_swimming_pool_heat_toggle
  - trigger: homeassistant
    event: start
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.garden_swimming_pool_heat_toggle
        state: 'on'
      sequence:
      - choose:
        - conditions:
          - condition: numeric_state
            entity_id: climate.garden_heat_pump
            attribute: current_temperature
            above: 32
          sequence:
          - action: input_boolean.turn_off
            metadata: {}
            data: {}
            target:
              entity_id: input_boolean.garden_swimming_pool_heat_toggle
        - conditions:
          - condition: numeric_state
            entity_id: climate.garden_heat_pump
            below: 33
            attribute: current_temperature
          sequence:
          - repeat:
              sequence:
              - type: turn_on
                device_id: 254bd3f4675ebd884cf48e8432ade589
                entity_id: c3c6a841bbf202032bd5ed1a881a54ff
                domain: switch
              - device_id: f5e2a4276b3e4f7749d8096194ab65a6
                domain: climate
                entity_id: 72f7bba60e5d1631705c3087e7bd0160
                type: set_hvac_mode
                hvac_mode: heat
              - device_id: f5e2a4276b3e4f7749d8096194ab65a6
                domain: climate
                entity_id: 72f7bba60e5d1631705c3087e7bd0160
                type: set_preset_mode
                preset_mode: quick_heat
              - delay:
                  hours: 0
                  minutes: 0
                  seconds: 5
                  milliseconds: 0
              count: 2
    - conditions:
      - condition: state
        entity_id: input_boolean.garden_swimming_pool_heat_toggle
        state: 'off'
      - condition: state
        entity_id: timer.garden_pump_timer
        state: idle
      sequence:
      - repeat:
          sequence:
          - type: turn_off
            device_id: 254bd3f4675ebd884cf48e8432ade589
            entity_id: c3c6a841bbf202032bd5ed1a881a54ff
            domain: switch
          - device_id: f5e2a4276b3e4f7749d8096194ab65a6
            domain: climate
            entity_id: 72f7bba60e5d1631705c3087e7bd0160
            type: set_hvac_mode
            hvac_mode: 'off'
          - delay:
              hours: 0
              minutes: 0
              seconds: 5
              milliseconds: 0
          count: 2
  mode: queued
  max: 10
- id: '1755850491459'
  alias: Disable Lights During Night
  description: ''
  triggers:
  - trigger: time
    at: 07:00:00
    weekday:
    - mon
    - tue
    - wed
    - thu
    - fri
    - sat
    - sun
    id: morning
  - trigger: time
    at: '20:00:00'
    weekday:
    - mon
    - tue
    - wed
    - thu
    - fri
    - sun
    - sat
    id: evening
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - morning
      sequence:
      - action: automation.turn_on
        metadata: {}
        data: {}
        target:
          entity_id:
          - automation.baby_room_occupancy_lights
          - automation.landing_occupancy_lights
          - automation.bedroom_occupancy_lights
    - conditions:
      - condition: trigger
        id:
        - evening
      sequence:
      - action: automation.turn_off
        metadata: {}
        data:
          stop_actions: true
        target:
          entity_id:
          - automation.baby_room_occupancy_lights
          - automation.landing_occupancy_lights
          - automation.bedroom_occupancy_lights
  mode: single
- id: '1771059422125'
  alias: Verjaardag Hilde - Puzzle 1
  description: ''
  triggers:
  - trigger: state
    entity_id:
    - input_select.verjaardag_hilde_global_select
    to: '3'
    id: global
  - trigger: state
    entity_id:
    - binary_sensor.bedroom_contact_door
    id: slaapkamerdeur
  - trigger: state
    entity_id:
    - binary_sensor.baby_room_contact_door
    id: babykamerdeur
  - trigger: state
    entity_id:
    - binary_sensor.bathroom_contact_door
    id: badkamerdeur
  - trigger: state
    entity_id:
    - binary_sensor.hallway_contact_door
    id: voordeur
  - trigger: state
    entity_id:
    - binary_sensor.garden_contact_door
    id: achterdeur
  - trigger: state
    entity_id:
    - input_select.verjaardag_hilde_puzzle_1_select
    to: '5'
    id: puzzle_complete
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - global
      sequence:
      - action: input_select.select_option
        metadata: {}
        data:
          option: '0'
        target:
          entity_id: input_select.verjaardag_hilde_puzzle_1_select
    - conditions:
      - condition: trigger
        id:
        - slaapkamerdeur
      sequence:
      - if:
        - condition: state
          entity_id: input_select.verjaardag_hilde_puzzle_1_select
          state: '0'
        then:
        - action: input_select.select_option
          metadata: {}
          data:
            option: '1'
          target:
            entity_id: input_select.verjaardag_hilde_puzzle_1_select
    - conditions:
      - condition: trigger
        id:
        - babykamerdeur
      sequence:
      - if:
        - condition: state
          entity_id: input_select.verjaardag_hilde_puzzle_1_select
          state: '1'
        then:
        - action: input_select.select_option
          metadata: {}
          data:
            option: '2'
          target:
            entity_id: input_select.verjaardag_hilde_puzzle_1_select
    - conditions:
      - condition: trigger
        id:
        - badkamerdeur
      sequence:
      - if:
        - condition: state
          entity_id: input_select.verjaardag_hilde_puzzle_1_select
          state: '2'
        then:
        - action: input_select.select_option
          metadata: {}
          data:
            option: '3'
          target:
            entity_id: input_select.verjaardag_hilde_puzzle_1_select
    - conditions:
      - condition: trigger
        id:
        - voordeur
      sequence:
      - if:
        - condition: state
          entity_id: input_select.verjaardag_hilde_puzzle_1_select
          state: '3'
        then:
        - action: input_select.select_option
          metadata: {}
          data:
            option: '4'
          target:
            entity_id: input_select.verjaardag_hilde_puzzle_1_select
    - conditions:
      - condition: trigger
        id:
        - achterdeur
      sequence:
      - if:
        - condition: state
          entity_id: input_select.verjaardag_hilde_puzzle_1_select
          state: '4'
        then:
        - action: input_select.select_option
          metadata: {}
          data:
            option: '5'
          target:
            entity_id: input_select.verjaardag_hilde_puzzle_1_select
    - conditions:
      - condition: trigger
        id:
        - puzzle_complete
      sequence:
      - delay:
          hours: 0
          minutes: 0
          seconds: 5
          milliseconds: 0
      - action: input_select.select_option
        metadata: {}
        data:
          option: '4'
        target:
          entity_id: input_select.verjaardag_hilde_global_select
  mode: single
- id: '1771059422126'
  alias: Verjaardag Hilde - Puzzle 2
  description: ''
  triggers:
  - trigger: state
    entity_id:
    - input_select.verjaardag_hilde_global_select
    to: '4'
    id: global
  - trigger: state
    entity_id:
    - media_player.bedroom_tv
    attribute: app_name
    to: Videoland
    id: bedroom_videoland
  - trigger: state
    entity_id:
    - media_player.living_room_tv
    attribute: app_name
    to: HBO Max
    id: livingroom_hbo
  - trigger: state
    entity_id:
    - media_player.bedroom_tv
    attribute: app_name
    to: Prime Video
    id: bedroom_prime
  - trigger: state
    entity_id:
    - input_select.verjaardag_hilde_puzzle_2_select
    to: '3'
    id: puzzle_complete
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - global
      sequence:
      - action: input_select.select_option
        metadata: {}
        data:
          option: '0'
        target:
          entity_id: input_select.verjaardag_hilde_puzzle_2_select
    - conditions:
      - condition: trigger
        id:
        - bedroom_videoland
      sequence:
      - if:
        - condition: state
          entity_id: input_select.verjaardag_hilde_puzzle_2_select
          state: '0'
        then:
        - action: input_select.select_option
          metadata: {}
          data:
            option: '1'
          target:
            entity_id: input_select.verjaardag_hilde_puzzle_2_select
    - conditions:
      - condition: trigger
        id:
        - livingroom_hbo
      sequence:
      - if:
        - condition: state
          entity_id: input_select.verjaardag_hilde_puzzle_2_select
          state: '1'
        then:
        - action: input_select.select_option
          metadata: {}
          data:
            option: '2'
          target:
            entity_id: input_select.verjaardag_hilde_puzzle_2_select
    - conditions:
      - condition: trigger
        id:
        - bedroom_prime
      sequence:
      - if:
        - condition: state
          entity_id: input_select.verjaardag_hilde_puzzle_2_select
          state: '2'
        then:
        - action: input_select.select_option
          metadata: {}
          data:
            option: '3'
          target:
            entity_id: input_select.verjaardag_hilde_puzzle_2_select
    - conditions:
      - condition: trigger
        id:
        - puzzle_complete
      sequence:
      - delay:
          hours: 0
          minutes: 0
          seconds: 5
          milliseconds: 0
      - action: input_select.select_option
        metadata: {}
        data:
          option: '5'
        target:
          entity_id: input_select.verjaardag_hilde_global_select
  mode: single
- id: '1771059422129'
  alias: Verjaardag Hilde - Puzzle 3
  description: ''
  triggers:
  - trigger: state
    entity_id:
    - input_select.verjaardag_hilde_global_select
    to: '5'
    id: global
  - trigger: state
    entity_id:
    - input_boolean.verjaardag_hilde_puzzle_3_keuken_toggle
    - input_boolean.verjaardag_hilde_puzzle_3_slaapkamer_toggle
    - input_boolean.verjaardag_hilde_puzzle_3_tuin_toggle
    - input_boolean.verjaardag_hilde_puzzle_3_voorraadkast_toggle
    - input_boolean.verjaardag_hilde_puzzle_3_waskamer_toggle
    to: 'on'
    id: toggle_change
  - trigger: state
    entity_id:
    - binary_sensor.bedroom_shelly_input
    id: bedroom_switch
  - trigger: state
    entity_id:
    - binary_sensor.laundry_room_shelly_input
    id: laundry_room_switch
  - trigger: state
    entity_id:
    - binary_sensor.kitchen_shelly_input
    id: kitchen_switch
  - trigger: state
    entity_id:
    - binary_sensor.garden_shelly_input
    id: garden_switch
  - trigger: state
    entity_id:
    - binary_sensor.supply_closet_shelly_input
    id: supply_closet_switch
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - global
      sequence:
      - action: input_boolean.turn_off
        metadata: {}
        data: {}
        target:
          entity_id:
          - input_boolean.verjaardag_hilde_puzzle_3_keuken_toggle
          - input_boolean.verjaardag_hilde_puzzle_3_slaapkamer_toggle
          - input_boolean.verjaardag_hilde_puzzle_3_tuin_toggle
          - input_boolean.verjaardag_hilde_puzzle_3_voorraadkast_toggle
          - input_boolean.verjaardag_hilde_puzzle_3_waskamer_toggle
    - conditions:
      - condition: trigger
        id:
        - toggle_change
      - condition: state
        entity_id: input_boolean.verjaardag_hilde_puzzle_3_keuken_toggle
        state: 'on'
      - condition: state
        entity_id: input_boolean.verjaardag_hilde_puzzle_3_slaapkamer_toggle
        state: 'on'
      - condition: state
        entity_id: input_boolean.verjaardag_hilde_puzzle_3_tuin_toggle
        state: 'on'
      - condition: state
        entity_id: input_boolean.verjaardag_hilde_puzzle_3_voorraadkast_toggle
        state: 'on'
      - condition: state
        entity_id: input_boolean.verjaardag_hilde_puzzle_3_waskamer_toggle
        state: 'on'
      sequence:
      - delay:
          hours: 0
          minutes: 0
          seconds: 5
          milliseconds: 0
      - action: input_select.select_option
        metadata: {}
        data:
          option: '6'
        target:
          entity_id: input_select.verjaardag_hilde_global_select
    - conditions:
      - condition: trigger
        id:
        - bedroom_switch
      - condition: state
        entity_id: input_select.verjaardag_hilde_global_select
        state: '5'
      sequence:
      - action: switch.toggle
        metadata: {}
        data: {}
        target:
          entity_id: switch.laundry_room_shelly
    - conditions:
      - condition: trigger
        id:
        - laundry_room_switch
      - condition: state
        entity_id: input_select.verjaardag_hilde_global_select
        state: '5'
      sequence:
      - action: switch.toggle
        metadata: {}
        data: {}
        target:
          entity_id: switch.supply_closet_shelly
    - conditions:
      - condition: trigger
        id:
        - kitchen_switch
      - condition: state
        entity_id: input_select.verjaardag_hilde_global_select
        state: '5'
      sequence:
      - action: light.toggle
        metadata: {}
        data: {}
        target:
          entity_id: light.bedroom_light
    - conditions:
      - condition: trigger
        id:
        - garden_switch
      - condition: state
        entity_id: input_select.verjaardag_hilde_global_select
        state: '5'
      sequence:
      - action: light.toggle
        metadata: {}
        data: {}
        target:
          entity_id: light.kitchen_lights
    - conditions:
      - condition: trigger
        id:
        - supply_closet_switch
      - condition: state
        entity_id: input_select.verjaardag_hilde_global_select
        state: '5'
      sequence:
      - action: switch.toggle
        metadata: {}
        data: {}
        target:
          entity_id: switch.garden_shelly
  mode: queued
  max: 10
- id: '1771059422127'
  alias: Verjaardag Hilde - Puzzle 4
  description: ''
  triggers:
  - trigger: state
    entity_id:
    - input_select.verjaardag_hilde_global_select
    to: '6'
    id: global
  - trigger: state
    entity_id:
    - light.kitchen_1_light
    - light.kitchen_2_light
    - light.kitchen_3_light
    - light.kitchen_4_light
    - light.kitchen_5_light
    - light.kitchen_6_light
    - light.living_room_corner_light
    - light.living_room_dining_table_light
    - light.living_room_monkey_light
    - light.living_room_tv_light
    attribute: rgb_color
    id: light_color_change
  - trigger: state
    entity_id:
    - input_boolean.verjaardag_hilde_puzzle_4_red_toggle
    - input_boolean.verjaardag_hilde_puzzle_4_blue_toggle
    - input_boolean.verjaardag_hilde_puzzle_4_green_toggle
    to: 'on'
    id: color_toggle_change
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - global
      sequence:
      - action: input_boolean.turn_off
        metadata: {}
        data: {}
        target:
          entity_id:
          - input_boolean.verjaardag_hilde_puzzle_4_red_toggle
          - input_boolean.verjaardag_hilde_puzzle_4_blue_toggle
          - input_boolean.verjaardag_hilde_puzzle_4_green_toggle
    - conditions:
      - condition: trigger
        id:
        - light_color_change
      sequence:
      - choose:
        - conditions:
          - condition: template
            value_template: >-
              {% set rgb = state_attr(trigger.entity_id, 'rgb_color') %}
              {{ rgb is not none and rgb[0] > 200 and rgb[1] < 100 and rgb[2] < 100 }}
          sequence:
          - action: input_boolean.turn_on
            metadata: {}
            data: {}
            target:
              entity_id: input_boolean.verjaardag_hilde_puzzle_4_red_toggle
        - conditions:
          - condition: template
            value_template: >-
              {% set rgb = state_attr(trigger.entity_id, 'rgb_color') %}
              {{ rgb is not none and rgb[2] > 200 and rgb[0] < 100 and rgb[1] < 100 }}
          sequence:
          - action: input_boolean.turn_on
            metadata: {}
            data: {}
            target:
              entity_id: input_boolean.verjaardag_hilde_puzzle_4_blue_toggle
        - conditions:
          - condition: template
            value_template: >-
              {% set rgb = state_attr(trigger.entity_id, 'rgb_color') %}
              {{ rgb is not none and rgb[1] > 200 and rgb[0] < 100 and rgb[2] < 100 }}
          sequence:
          - action: input_boolean.turn_on
            metadata: {}
            data: {}
            target:
              entity_id: input_boolean.verjaardag_hilde_puzzle_4_green_toggle
    - conditions:
      - condition: trigger
        id:
        - color_toggle_change
      - condition: state
        entity_id: input_boolean.verjaardag_hilde_puzzle_4_red_toggle
        state: 'on'
      - condition: state
        entity_id: input_boolean.verjaardag_hilde_puzzle_4_blue_toggle
        state: 'on'
      - condition: state
        entity_id: input_boolean.verjaardag_hilde_puzzle_4_green_toggle
        state: 'on'
      sequence:
      - delay:
          hours: 0
          minutes: 0
          seconds: 5
          milliseconds: 0
      - action: input_select.select_option
        metadata: {}
        data:
          option: '7'
        target:
          entity_id: input_select.verjaardag_hilde_global_select
  mode: queued
  max: 10
- id: '1771059422128'
  alias: Verjaardag Hilde - Puzzle 5
  description: ''
  triggers:
  - trigger: state
    entity_id:
    - input_select.verjaardag_hilde_global_select
    to: '7'
    id: global
  - trigger: state
    entity_id:
    - binary_sensor.living_room_shelly_input
    id: woonkamer
  - trigger: state
    entity_id:
    - binary_sensor.kitchen_shelly_input
    id: keuken
  - trigger: state
    entity_id:
    - binary_sensor.hallway_shelly_input
    id: gang
  - trigger: state
    entity_id:
    - binary_sensor.bedroom_shelly_input
    id: slaapkamer
  - trigger: state
    entity_id:
    - binary_sensor.office_shelly_input
    id: kantoor
  - trigger: state
    entity_id:
    - input_select.verjaardag_hilde_puzzle_5_select
    to: '5'
    id: puzzle_complete
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - global
      sequence:
      - action: input_select.select_option
        metadata: {}
        data:
          option: '0'
        target:
          entity_id: input_select.verjaardag_hilde_puzzle_5_select
    - conditions:
      - condition: trigger
        id:
        - woonkamer
      sequence:
      - if:
        - condition: state
          entity_id: input_select.verjaardag_hilde_puzzle_5_select
          state: '0'
        then:
        - action: input_select.select_option
          metadata: {}
          data:
            option: '1'
          target:
            entity_id: input_select.verjaardag_hilde_puzzle_5_select
    - conditions:
      - condition: trigger
        id:
        - keuken
      sequence:
      - if:
        - condition: state
          entity_id: input_select.verjaardag_hilde_puzzle_5_select
          state: '1'
        then:
        - action: input_select.select_option
          metadata: {}
          data:
            option: '2'
          target:
            entity_id: input_select.verjaardag_hilde_puzzle_5_select
    - conditions:
      - condition: trigger
        id:
        - gang
      sequence:
      - if:
        - condition: state
          entity_id: input_select.verjaardag_hilde_puzzle_5_select
          state: '2'
        then:
        - action: input_select.select_option
          metadata: {}
          data:
            option: '3'
          target:
            entity_id: input_select.verjaardag_hilde_puzzle_5_select
    - conditions:
      - condition: trigger
        id:
        - slaapkamer
      sequence:
      - if:
        - condition: state
          entity_id: input_select.verjaardag_hilde_puzzle_5_select
          state: '3'
        then:
        - action: input_select.select_option
          metadata: {}
          data:
            option: '4'
          target:
            entity_id: input_select.verjaardag_hilde_puzzle_5_select
    - conditions:
      - condition: trigger
        id:
        - kantoor
      sequence:
      - if:
        - condition: state
          entity_id: input_select.verjaardag_hilde_puzzle_5_select
          state: '4'
        then:
        - action: input_select.select_option
          metadata: {}
          data:
            option: '5'
          target:
            entity_id: input_select.verjaardag_hilde_puzzle_5_select
    - conditions:
      - condition: trigger
        id:
        - puzzle_complete
      sequence:
      - delay:
          hours: 0
          minutes: 0
          seconds: 5
          milliseconds: 0
      - action: input_select.select_option
        metadata: {}
        data:
          option: '8'
        target:
          entity_id: input_select.verjaardag_hilde_global_select
  mode: single
- id: '1771059422131'
  alias: Verjaardag Hilde - Puzzle 6
  description: ''
  triggers:
  - trigger: state
    entity_id:
    - input_select.verjaardag_hilde_global_select
    to: '8'
    id: global
  - trigger: state
    entity_id:
    - binary_sensor.wasmachine_power
    id: device_change
  - trigger: state
    entity_id:
    - binary_sensor.droger_power
    id: device_change
  - trigger: state
    entity_id:
    - media_player.bedroom_tv
    id: device_change
  - trigger: state
    entity_id:
    - media_player.living_room_tv
    id: device_change
  - trigger: numeric_state
    entity_id:
    - input_number.verjaardag_hilde_puzzle_6_power_number
    above: 39.99
    below: 50.01
    id: puzzle_complete
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: or
        conditions:
        - condition: trigger
          id:
          - global
        - condition: and
          conditions:
          - condition: trigger
            id:
            - device_change
          - condition: state
            entity_id: input_select.verjaardag_hilde_global_select
            state: '8'
      sequence:
      - action: input_number.set_value
        metadata: {}
        data:
          value: >-
            {% set washing_machine = 19 if is_state('binary_sensor.wasmachine_power', 'on') else 0 %}
            {% set dryer = 32 if is_state('binary_sensor.droger_power', 'on') else 0 %}
            {% set bedroom_tv = 5 if not is_state('media_player.bedroom_tv', 'off') else 0 %}
            {% set living_room_tv = 14 if not is_state('media_player.living_room_tv', 'off') else 0 %}
            {{ washing_machine + dryer + bedroom_tv + living_room_tv }}
        target:
          entity_id: input_number.verjaardag_hilde_puzzle_6_power_number
    - conditions:
      - condition: trigger
        id:
        - puzzle_complete
      - condition: state
        entity_id: input_select.verjaardag_hilde_global_select
        state: '8'
      sequence:
      - delay:
          hours: 0
          minutes: 0
          seconds: 5
          milliseconds: 0
      - action: input_select.select_option
        metadata: {}
        data:
          option: '9'
        target:
          entity_id: input_select.verjaardag_hilde_global_select
  mode: queued
  max: 10
- id: '1771059422132'
  alias: Verjaardag Hilde - Flash Loop Control
  description: Start/stop flash loop script when entering/exiting global state 7
  triggers:
  - trigger: state
    entity_id:
    - input_select.verjaardag_hilde_global_select
    to: '7'
    id: start_flash
  - trigger: state
    entity_id:
    - input_select.verjaardag_hilde_global_select
    from: '7'
    id: stop_flash
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - start_flash
      sequence:
      - action: script.verjaardag_hilde_lights_flash_loop
        metadata: {}
        data: {}
    - conditions:
      - condition: trigger
        id:
        - stop_flash
      sequence:
      - action: script.turn_off
        metadata: {}
        data: {}
        target:
          entity_id: script.verjaardag_hilde_lights_flash_loop
  mode: single
