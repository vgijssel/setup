vmType: qemu
minimumLimaVersion: "1.0.0"

# Arch: "default", "x86_64", "aarch64".
# ðŸŸ¢ Builtin default: "default" (corresponds to the host architecture)
arch: aarch64

images:
  - location: ./incus-images/pikvm_output/disk.qcow2
    arch: aarch64

# Need to specify additional ones to tinkerbell can write the os into a disk
# mimic zfs disks as well?
additionalDisks:
# disks should either be a list of disk name strings, for example:
# - "data"
# or a list of disk objects with extra parameters, for example:
# - name: "data"
#   format: true
#   fsType: "ext4"

# Probe scripts to check readiness.
# The scripts run in user mode. They must start with a '#!' line.
# The scripts can use the following template variables: {{.Home}}, {{.Name}}, {{.Hostname}}, {{.UID}}, {{.User}}, and {{.Param.Key}}.
# ðŸŸ¢ Builtin default: []
# probes:
# # Only `readiness` probes are supported right now.
# - mode: readiness
#   description: vim to be installed
#   script: |
#      #!/bin/bash
#      set -eux -o pipefail
#      if ! timeout 30s bash -c "until command -v vim; do sleep 3; done"; then
#        echo >&2 "vim is not installed yet"
#        exit 1
#      fi
#   hint: |
#     vim was not installed in the guest. Make sure the package system is working correctly.
#     Also see "/var/log/cloud-init-output.log" in the guest.

user:
  name: ubuntu
  comment: ubunti

vmOpts:
  qemu:
    minimumVersion: 9.2.0

os: Linux
video:
  display: cocoa
networks:
  - lima: user-v2
plain: true
nestedVirtualization: false
# Need memory to unpack the ram disk
memory: 2GiB
