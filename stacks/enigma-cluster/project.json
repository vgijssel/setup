{
  "name": "enigma-cluster",
  "projectType": "application",
  "sourceRoot": "stacks/enigma-cluster",
  "targets": {
    "create-1password-secret": {
      "executor": "nx:run-commands",
      "options": {
        "commands": [
          "kubectl create secret generic 1password-credentials --namespace=1password --from-literal=1password-credentials.json=\"$(op read 'op://enigma-cluster/enigma-cluster Credentials File/1password-credentials.json')\" --dry-run=client -o yaml | kubectl apply -f -",
          "kubectl create secret generic 1password-operator-token --namespace=1password --from-literal=token=\"$(op read 'op://enigma-cluster/hxmp2hgt5iluzk5zfq2trx4oae/credential')\" --dry-run=client -o yaml | kubectl apply -f -"
        ],
        "parallel": false,
        "cwd": "{workspaceRoot}"
      },
      "metadata": {
        "description": "Create or replace the 1password-credentials and 1password-operator-token Kubernetes secrets"
      }
    }
  },
  "tags": ["stack", "kubernetes", "production"]
}