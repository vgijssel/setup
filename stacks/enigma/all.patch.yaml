machine:
  install:
    disk: /dev/nvme0n1
  kubelet:
    nodeIP:
      validSubnets:
        - 10.15.15.0/24
  network:
    hostname: illusion
    nameservers:
      - 192.168.1.1
    interfaces:
      - interface: br0
        bridge:
          stp:
            enabled: true
          interfaces:
            - enp4s0f0np0
            - enp4s0f1np1

      - interface: br1
        bridge:
          stp:
            enabled: true
          interfaces:
            - eno1
        routes:
          - network: 0.0.0.0/0
            gateway: 192.168.1.1
        vip:
          ip: 192.168.1.50

  # features:
  #   hostDNS:
  # Necessary for Cilium `bpf.masquerade=true`
  # See https://github.com/siderolabs/talos/pull/9200
  # forwardKubeDNSToHost: false
cluster:
  allowSchedulingOnControlPlanes: true
  etcd:
    advertisedSubnets:
      - 10.15.15.0/24
  network:
    cni:
      name: none
  proxy:
    disabled: true
