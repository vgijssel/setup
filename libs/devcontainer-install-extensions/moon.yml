type: library
language: bash

tasks:
  build:
    command: echo $MOON_TASK_HASH > dist/run.sha
    inputs:
      - devcontainer-install-extensions.sh
    outputs:
      - dist/run.sha
    options:
      cache: true
      runInCI: true

  test:
    command: bats
    args:
      - tests/test.bats
    inputs:
      - devcontainer-install-extensions.sh
      - tests/**
      - "@globs(code-server_bin)"
    options:
      cache: true
      runInCI: true
