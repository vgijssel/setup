apiVersion: kuttl.dev/v1beta1
kind: TestSuite
testDirs:
- ./tests
startKIND: false
kindNodeCache: true
skipClusterDelete: true
timeout: 90
commands:
- command: helm repo add metallb https://metallb.github.io/metallb
- command: helm repo update
- command: helm upgrade --install metallb metallb/metallb --namespace metallb-system --create-namespace --wait --timeout=300s
- command: kubectl apply -f metallb-config.yaml
- command: helm install ingress-nginx ../../third_party/vendir/charts/ingress-nginx --namespace ingress-nginx --create-namespace --set controller.service.type=LoadBalancer --set controller.service.externalTrafficPolicy=Local --wait --timeout=300s