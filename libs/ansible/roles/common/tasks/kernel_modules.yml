---
# Kernel Module Configuration Tasks
# Loads required kernel modules for networking features

- name: Load 8021q kernel module
  community.general.modprobe:
    name: 8021q
    state: present
  become: true

- name: Ensure 8021q module loads on boot
  ansible.builtin.lineinfile:
    path: /etc/modules
    line: 8021q
    state: present
    create: true
    mode: "0644"
  become: true
