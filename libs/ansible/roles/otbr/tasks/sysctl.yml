---
# Kernel Settings for Thread/Matter Network
# Configures sysctl parameters required for OTBR operation

- name: Deploy Thread/Matter sysctl configuration
  ansible.builtin.template:
    src: 99-thread-matter.conf.j2
    dest: /etc/sysctl.d/99-thread-matter.conf
    owner: root
    group: root
    mode: "0644"
  become: true
  notify: reload sysctl
  register: sysctl_config

- name: Apply sysctl settings immediately
  ansible.builtin.command:
    cmd: sysctl --system
  become: true
  when: sysctl_config.changed
