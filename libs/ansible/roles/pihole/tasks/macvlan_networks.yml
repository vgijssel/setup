---
# Docker Macvlan Networks Configuration
# Creates macvlan networks for VLAN 50 and Admin LAN Pi-hole instances

- name: Create VLAN 50 macvlan network
  community.docker.docker_network:
    name: macvlan_vlan50
    driver: macvlan
    driver_options:
      parent: "{{ pihole_vlan50_parent_interface }}"
    ipam_config:
      - subnet: "{{ pihole_vlan50_subnet }}"
        gateway: "{{ pihole_vlan50_gateway }}"
        iprange: "{{ pihole_vlan50_ip }}/32"
    state: present
  become: true

- name: Create Admin LAN macvlan network
  community.docker.docker_network:
    name: macvlan_admin
    driver: macvlan
    driver_options:
      parent: "{{ pihole_admin_parent_interface }}"
    ipam_config:
      - subnet: "{{ pihole_admin_subnet }}"
        gateway: "{{ pihole_admin_gateway }}"
        iprange: "{{ pihole_admin_ip }}/32"
    state: present
  become: true
