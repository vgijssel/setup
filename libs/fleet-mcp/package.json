{
  "name": "fleet-mcp",
  "version": "0.6.0",
  "private": true,
  "description": "Clean architecture fleet management for Claude Code agents",
  "nx": {
    "tags": [
      "type:lib",
      "scope:infrastructure"
    ],
    "targets": {
      "server": {
        "executor": "nx:run-commands",
        "options": {
          "command": "FLEET_MCP_AUTH_ENABLED=true uv run --all-extras uvicorn fleet_mcp.__main__:app --host 127.0.0.1 --port 8000 --reload --timeout-graceful-shutdown 3",
          "cwd": "libs/fleet-mcp"
        },
        "metadata": {
          "description": "Run the fleet-mcp server with hot reload in stateless HTTP mode"
        }
      },
      "test": {
        "executor": "nx:run-commands",
        "options": {
          "command": "uv run pytest",
          "cwd": "libs/fleet-mcp"
        },
        "cache": true,
        "inputs": [
          "{projectRoot}/src/**/*.py",
          "{projectRoot}/tests/**/*.py",
          "{projectRoot}/pyproject.toml",
          "!{projectRoot}/.venv/**",
          "!{projectRoot}/.pytest_cache/**",
          "!{projectRoot}/**/__pycache__/**"
        ],
        "outputs": [
          "{projectRoot}/.coverage",
          "{projectRoot}/htmlcov"
        ]
      },
      "lint": {
        "executor": "nx:run-commands",
        "options": {
          "command": "uv run lint-imports",
          "cwd": "libs/fleet-mcp"
        },
        "cache": true,
        "inputs": [
          "{projectRoot}/src/**/*.py",
          "{projectRoot}/pyproject.toml",
          "!{projectRoot}/.venv/**",
          "!{projectRoot}/**/__pycache__/**"
        ],
        "metadata": {
          "description": "Verify clean architecture layer boundaries with import-linter"
        }
      },
      "build": {
        "executor": "nx:run-commands",
        "options": {
          "command": "uv build",
          "cwd": "libs/fleet-mcp"
        },
        "inputs": [
          "{projectRoot}/**/*.*",
          "!{projectRoot}/.venv/**",
          "!{projectRoot}/.pytest_cache/**",
          "!{projectRoot}/**/__pycache__/**"
        ],
        "cache": true,
        "outputs": [
          "{projectRoot}/libs/fleet-mcp/dist"
        ],
        "metadata": {
          "description": "Build the fleet-mcp Python package as a wheel"
        }
      },
      "nx-release-publish": {
        "executor": "nx:run-commands",
        "dependsOn": [
          "build"
        ],
        "options": {
          "parallel": false,
          "cwd": "libs/fleet-mcp",
          "commands": [
            "uv version $(cat package.json | jq -r .version)",
            "uv publish"
          ]
        }
      }
    }
  }
}
