language: python
layer: library
stack: backend
tags:
  - python
tasks:
  lint:
    command: uv run lint-imports
    inputs:
      - "@files(python_sources)"
      - "@files(python_configs)"
    options:
      cache: true
  release:
    command: ./release.sh
    inputs:
      - "@files(python_sources)"
      - "@files(python_configs)"
      - file: release.sh
      - "!dist/**"
    local: true
    options:
      cache: true
  server:
    command: FLEET_MCP_AUTH_ENABLED=true FLEET_MCP_TASKFILE=/workspaces/setup/libs/coder-devcontainer/Taskfile.yml uv run --all-extras uvicorn fleet_mcp.__main__:app --host 127.0.0.1 --port 8000 --reload --timeout-graceful-shutdown 3
    env:
      CWD: libs/fleet-mcp
    local: true
