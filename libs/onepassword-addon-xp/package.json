{
  "name": "onepassword-addon-xp",
  "version": "0.1.0",
  "private": false,
  "nx": {
    "projectType": "library",
    "sourceRoot": "libs/onepassword-addon-xp",
    "targets": {
      "build": {
        "executor": "nx:run-commands",
        "options": {
          "commands": [
            "helm repo add 1password https://1password.github.io/connect-helm-charts || true",
            "helm repo update 1password",
            "helm pull 1password/connect --version 2.0.5 --destination libs/onepassword-addon-xp/helm",
            "up xpkg build -f libs/onepassword-addon-xp -o libs/onepassword-addon-xp/dist/onepassword-addon-xp.xpkg"
          ],
          "parallel": false
        },
        "outputs": [
          "{projectRoot}/dist",
          "{projectRoot}/helm/*.tgz"
        ],
        "inputs": [
          "{projectRoot}/crossplane.yaml",
          "{projectRoot}/crds/**/*",
          "{projectRoot}/package.json"
        ],
        "cache": true,
        "metadata": {
          "description": "Build Crossplane AddOn package"
        }
      },
      "test": {
        "executor": "nx:run-commands",
        "options": {
          "commands": [
            "kind create cluster --name onepassword-test --config libs/onepassword-addon-xp/tests/kind-config.yaml || true",
            "helm install crossplane crossplane-stable/crossplane --namespace crossplane-system --create-namespace --wait || true",
            "kuttl test --config libs/onepassword-addon-xp/tests/kuttl-test.yaml",
            "kind delete cluster --name onepassword-test || true"
          ],
          "parallel": false,
          "cwd": "."
        },
        "cache": true,
        "metadata": {
          "description": "Run kuttl e2e tests in kind cluster"
        }
      }
    },
    "tags": [
      "crossplane",
      "onepassword",
      "kubernetes",
      "secrets"
    ]
  }
}
