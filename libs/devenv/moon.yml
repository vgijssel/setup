language: javascript
layer: library
tags:
  - devenv
  - chezmoi
  - development-environment
  - macos
  - devenv
  - chezmoi
  - development-environment
  - macos
tasks:
  apply:
    command: chezmoi-wrapper apply --verbose
    local: true

  kerk:
    script: ../../bin/exec echo $PATH

  test:
    script: echo $PATH && env && chezmoi-wrapper apply --force --verbose && goss validate
    deps:
      - claude-code:build
      - vendir:build
    inputs:
      - glob: files/**/*
        cache: true
      - file: goss.yaml
      - file: chezmoi.yaml
      - file: /.chezmoiroot
    options:
      cache: true
