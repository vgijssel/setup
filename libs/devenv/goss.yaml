package:
  git:
    installed: true
  ssh:
    installed: true
  zsh:
    installed: true
  curl:
    installed: true
  wget:
    installed: true

command:
  direnv exec / chezmoi --help:
    title: "chezmoi binary works outside the repo root"
    stdout:
      - Use "chezmoi [command] --help" for more information about a command.
    exit-status: 0
    stderr: ""
    timeout: 60000

  fzf --version:
    title: "fzf >=0.51.0 needs to be installed for zoxide"
    meta:
      url: https://github.com/ajeetdsouza/zoxide
    exec: fzf --version | awk '{print $1}' | tr -d '\n'
    exit-status: 0
    stdout:
      semver-constraint: ">=0.51.0"
    stderr: ""
    timeout: 60000

  git_version:
    title: Git supports SSH commit signing from version 2.34.0
    meta:
      url: https://developer.1password.com/docs/ssh/git-commit-signing/
    exec: git --version | awk '{print $3}' | tr -d '\n'
    exit-status: 0
    stdout:
      semver-constraint: ">=2.34.0"
    stderr: ""
    timeout: 60000

  locale:
    exit-status: 0
    stdout:
      - "LANG=en_US.UTF-8"

  chezmoi_version:
    exec: chezmoi --version | awk '{print $3}' | tr -d 'v,\n'
    exit-status: 0
    stdout:
      semver-constraint: ">=2.62.5"
    stderr: ""
    timeout: 60000

  starship_version:
    title: "Starship prompt is installed via Hermit"
    exec: starship --version |  awk 'NR==1 {print $2}' | tr -d '\n'
    exit-status: 0
    stdout:
      semver-constraint: ">=1.23.0"
    stderr: ""
    timeout: 60000

  which starship:
    title: "Starship is available in PATH via Hermit"
    exit-status: 0
    stdout: "{{.Env.SETUP_DIR}}/bin/starship\n"

  direnv exec / which starship:
    title: "Starship is available in PATH outside of repo root"
    exit-status: 0
    stdout: "{{.Env.HOME}}/.local/setup/bin/starship\n"

user:
  devcontainer:
    exists: true
    home: /home/devcontainer
    shell: /usr/bin/zsh
  root:
    exists: true
    shell: /usr/bin/zsh

group:
  devcontainer:
    exists: true

file:
  /home/devcontainer:
    exists: true
    owner: devcontainer
    group: devcontainer
    mode: "0750"
    filetype: directory

  /etc/sudoers.d/devcontainer:
    exists: true

  /home/devcontainer/.config/direnv/direnv.toml:
    exists: true
    filetype: file
    owner: devcontainer
    group: devcontainer
    contents:
      - "/workspaces"

  /home/devcontainer/.config:
    exists: true
    filetype: directory
    owner: devcontainer
    group: devcontainer

  /bin/zsh:
    exists: true
    filetype: file

  # Chezmoi-managed configuration files
  /home/devcontainer/.zshrc:
    exists: true
    filetype: file
    owner: devcontainer
    group: devcontainer

  /home/devcontainer/.gitconfig:
    exists: true
    filetype: file
    owner: devcontainer
    group: devcontainer
    contents:
      - "[user]"
      - "name=mvgijssel"

  /home/devcontainer/.config/starship.toml:
    exists: true
    filetype: file
    owner: devcontainer
    group: devcontainer
    contents:
      - "add_newline = true"

  /home/devcontainer/.zimrc:
    exists: true
    filetype: file
    owner: devcontainer
    group: devcontainer

  # Zim framework directory
  /home/devcontainer/.zim:
    exists: true
    filetype: directory
    owner: devcontainer
    group: devcontainer

  # SSH directory
  /home/devcontainer/.ssh:
    exists: true
    filetype: directory
    mode: "0755"
    owner: devcontainer
    group: devcontainer
