#!/usr/bin/env bash
set -euo pipefail

{{- $setup_dir := env "SETUP_DIR" }}
{{- $devcontainer_file := joinPath $setup_dir ".devcontainer" "devcontainer.json" }}
{{- $run_sha_file := joinPath $setup_dir "libs" "devcontainer-install-extensions" "dist" "run.sha" }}

# devcontainer.json hash: {{ output "cat" $devcontainer_file | sha256sum }}
# run.sha: {{ output "cat" $run_sha_file | trim }}

DEVCONTAINER_FILE="{{ $devcontainer_file }}"

echo "ðŸ“¦ Installing VSCode extensions from $DEVCONTAINER_FILE"

devcontainer-install-extensions --file "$DEVCONTAINER_FILE"

echo "âœ… VSCode extensions installed successfully"