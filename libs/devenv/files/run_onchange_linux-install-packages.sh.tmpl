{{ if eq .chezmoi.os "linux" -}}
#!/bin/bash
set -euo pipefail

# Linux packages hash: {{ .packages.linux.apt_packages | toJson | sha256sum }}

echo "ðŸ“¦ Updating apt package list..."
sudo apt-get update

echo "ðŸ“¦ Installing Linux packages..."
{{ range .packages.linux.apt_packages -}}
echo "âž• Installing {{ . }}..."
sudo apt-get install -y {{ . | quote }}
{{ end -}}

# Install additional tools that might not be in apt
echo "ðŸ“¦ Installing starship prompt..."
if ! command -v starship &> /dev/null; then
    curl -sS https://starship.rs/install.sh | sh -s -- -y
fi

echo "ðŸ“¦ Installing zoxide..."
if ! command -v zoxide &> /dev/null; then
    curl -sSfL https://raw.githubusercontent.com/ajeetdsouza/zoxide/main/install.sh | sh
fi

echo "ðŸ“¦ Installing chezmoi..."
if ! command -v chezmoi &> /dev/null; then
    sh -c "$(curl -fsLS get.chezmoi.io)" -- -b "$HOME/.local/bin"
fi

echo "âœ… All Linux packages installed!"
{{ end -}}