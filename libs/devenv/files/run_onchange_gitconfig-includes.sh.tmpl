#!/usr/bin/env bash

set -euo pipefail

echo "Configuring git includes..."

# Remove all existing include paths first to ensure clean state
git config --global --unset-all include.path 2>/dev/null || true

# Always include the setup configuration
git config --global --add include.path ~/.gitconfig.setup

# Include platform-specific configuration
{{ if eq (env "IS_MACOS") "true" -}}
git config --global --add include.path ~/.gitconfig.macos
echo "Added macOS-specific git configuration"
{{- end }}

echo "kerk"
echo "Git includes configured successfully"