package:
  name: kerk_package
  version: 0.0.1
  epoch: 0
  description: "kerk package"
  target-architecture:
    - arm64
  copyright:
    - paths:
        - "*"
      attestation: TODO
      license: BSD-2-Clause
  dependencies:
    runtime:
      - python3

environment:
  contents:
    repositories:
      - https://dl-cdn.alpinelinux.org/alpine/edge/main
    packages:
      - alpine-baselayout-data
      - busybox
      # - build-base
      # - scanelf
      # - ssl_client
      # - ca-certificates-bundle
      # - brotli-dev
      # - gd-dev
      # - geoip-dev
      # - libmaxminddb-dev
      # - libxml2-dev
      # - libxslt-dev
      # - linux-headers
      # - openssl3-dev
      # - pcre-dev
      # - pkgconf
      # - zeromq-dev
      # - zlib-dev

  # accounts:
  #   groups:
  #     - groupname: nginx
  #       gid: 10000
  #   users:
  #     - username: nginx
  #       uid: 10000

pipeline:
  - runs: ls -la
  - name: "Create kerk_package dir"
    runs: mkdir -p ${{targets.destdir}}/opt/${{package.name}}
  # TODO: untar the kerk_tar file into the kerk_package dir
  - name: "Copy hello.sh"
    runs: cp -v hello.sh ${{targets.destdir}}/opt/${{package.name}}
  # - uses: strip
