- name: Update kernel parameters to bootable
  ansible.builtin.copy:
    src: cmdline.txt
    dest: /boot/firmware/cmdline.txt
    owner: root
    group: root
    mode: "0755"
  register: kernel_params_result
  become: true

- name: reboot
  ansible.builtin.reboot:
  when: kernel_params_result.changed
  become: true

- name: Generate locale
  ansible.builtin.command: locale-gen "en_US.UTF-8"
  become: true

- name: Configure locale
  ansible.builtin.command: dpkg-reconfigure locales
  become: true

- name: Copy locale settings
  ansible.builtin.copy:
    src: locale
    dest: /etc/default/locale
    owner: root
    group: root
    mode: "0644"
  become: true
