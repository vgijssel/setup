apiVersion: vendir.k14s.io/v1alpha1
kind: Config

# declaration of minimum required vendir binary version (optional)
minimumRequiredVersion: 0.8.0

directories:
  - path: manifests

    # set the permissions for this directory (optional; v0.33.0+)
    # by default directories will be created with 0700
    # can be provided as octal, in which case it needs to be prefixed with a `0`
    permissions: 0700

    contents:
      - path: multus-cni
        lazy: true
        git:
          url: https://github.com/k8snetworkplumbingwg/multus-cni
          ref: v4.2.0
          depth: 1
          lfsSkipSmudge: false
        newRootPath: deployments
        ignorePaths:
          - kustomization.yaml

      - path: local-path-provisioner
        lazy: true
        git:
          url: https://github.com/rancher/local-path-provisioner
          ref: v0.0.31
          depth: 1
          lfsSkipSmudge: false
        newRootPath: deploy

      - path: kubevirt
        lazy: true
        githubRelease:
          slug: kubevirt/kubevirt
          tag: v1.5.0
          assetNames: ["kubevirt-operator.yaml"]
          checksums:
            kubevirt-operator.yaml: 6868cbac915f54e2347150a2bff04794100e070e5efbabb358737a0a1e1d4d54
        ignorePaths:
          - kustomization.yaml

      - path: containerized-data-importer
        lazy: true
        githubRelease:
          slug: kubevirt/containerized-data-importer
          tag: v1.62.0
          assetNames: ["cdi-operator.yaml"]
          checksums:
            cdi-operator.yaml: c1c11ac41fa38c9cca2962c0955e1b5b6fa75cb225268eb8a724ffffd0b22622
        ignorePaths:
          - kustomization.yaml

  - path: charts

    # set the permissions for this directory (optional; v0.33.0+)
    # by default directories will be created with 0700
    # can be provided as octal, in which case it needs to be prefixed with a `0`
    permissions: 0700

    contents:
      - path: cilium
        lazy: true
        helmChart:
          name: cilium
          version: "1.17.3"
          repository:
            url: https://helm.cilium.io/
