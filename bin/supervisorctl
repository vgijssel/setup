#!/bin/bash
# Binstub for supervisorctl

set -eo pipefail

LOCAL_SETUP_DIR="$(realpath "$(dirname "$(realpath "$0")")/.." || true)"
EXEC_BIN="${LOCAL_SETUP_DIR}"/bin/exec

# Automatically connect to supervisord on localhost:9001
# This allows supervisorctl to work without passing -c config file
exec ${EXEC_BIN} uv run --project "${LOCAL_SETUP_DIR}"/third_party/python supervisorctl --serverurl http://127.0.0.1:9001 "$@"
