#!/bin/bash
# Execute a command with direnv environment loaded from the setup repo.
# This allows binstubs to work correctly when run outside the repo root.

set -eo pipefail

LOCAL_SETUP_DIR="$(realpath "$(dirname "$(realpath "$0")")/.." || true)"
DIRENV_BIN="${LOCAL_SETUP_DIR}"/bin/direnv

# Setting the direnv log format to empty to make direnv quiet
DIRENV_LOG_FORMAT="" exec ${DIRENV_BIN} exec "${LOCAL_SETUP_DIR}" "$@"
