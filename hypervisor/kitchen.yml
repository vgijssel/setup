---
# TODO: could leverage a metadata file to support automatic upgrading of Vagrant box files
# see https://martincarstenbach.wordpress.com/2020/05/05/versioning-for-your-local-vagrant-boxes-adding-a-new-box/
# and https://martincarstenbach.wordpress.com/2020/05/07/versioning-for-your-local-vagrant-boxes-handling-updates/
# lifecycle:
#   post_destroy:
#   - local: |
#    export VAGRANT_CWD="$KITCHEN_CWD/.kitchen/kitchen-vagrant/$KITCHEN_INSTANCE_NAME";
#    vagrant box

driver:
  name: vagrant
  vagrantfiles:
    - <%= ENV.fetch('VAGRANTFILE_CLOUD_INIT') %>

platforms:
  - name: ubuntu-focal
    driver:
      box: ubuntu-focal
      box_url: <%= ENV.fetch('VAGRANT_BOX') %>

verifier:
  name: inspec

provisioner:
  name: shell

suites:
  - name: default
    verifier:
      inspec_tests:
        - <%= ENV.fetch('TEST_DIR') %>/integration/default
    attributes:
